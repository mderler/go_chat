<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="public/style.css" />
    <title>Document</title>
  </head>
  <body class="bg-white dark:bg-slate-900">
    <div class="base-grid">
      <section class="h-screen bg-slate-600 w-80">
        <div class="text-center flex">
          <div class="text-xl">Matthias Derler</div>
          <div class="ml-auto mr-4">
            <label for="darkMode">Dark Mode:</label>
            <input id="darkMode" type="checkbox" onchange="onDarkModeChange" />
          </div>
        </div>
        <ul class="flex flex-col">
          <div>A</div>
          <div>B</div>
          <div>C</div>
          <div>D</div>
        </ul>
      </section>
      <section class="bg-slate-600 mx-10 mt-10 mb-10 rounded-xl border-2 border-slate-900 dark:border-white">
        <div class="chat-grid h-full border-inherit">
          <div class="border-inherit">
            <div class="max-w-64 ml-2 mt-2 border border-black rounded-md">
              <div class="font-bold">Stefan Derler</div>
              <p>This is a message</p>
            </div>
          </div>
          <div class="mt-auto mx-5 mb-3 shadow-lg bg-slate-900 rounded-md px-2 pt-2 pb-1">
            <textarea class="w-full bg-slate-900 text-white chat-input outline-none" placeholder="Type a message..."></textarea>
          </div>
        </div>
    </div>
    <script>
      function main() {
        const darkModeToggle = document.querySelector('#darkMode')
        darkModeToggle.addEventListener('change', onDarkModeChange)

        const body = document.querySelector('body')
        const darkMode = localStorage.getItem('darkMode')
        if (darkMode === 'enabled') {
          body.classList.add('dark')
          darkModeToggle.checked = true
        }

        const chatInput = document.querySelector('.chat-input')
        chatInput.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault()
            console.log('Send message:', chatInput.value)
            chatInput.value = ''
          }
        })
      }

      window.onload = main

      function onDarkModeChange(event) {
        const body = document.querySelector('body')
        if (event.target.checked) {
          body.classList.add('dark')
          localStorage.setItem('darkMode', 'enabled')
        } else {
          body.classList.remove('dark')
          localStorage.setItem('darkMode', null)
        }
      }
    </script>
  </body>
</html>
