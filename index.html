<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="public/style.css" />
    <title>Document</title>
  </head>

  <body>
    <div class="base-grid">
      <section class="h-screen bg-slate-600 w-80 border-r">
        <div class="text-center flex">
          <div class="text-xl">Matthias Derler</div>
          <div class="ml-auto mr-4">
            <label for="darkMode">Dark Mode:</label>
            <input id="darkMode" type="checkbox" onchange="onDarkModeChange" />
          </div>
        </div>
        <hr />
        <ul class="flex flex-col gap-2 mx-2 mt-2">
          <div class="border border-black rounded-md flex px-1 py-1">
            <div
              class="h-8 w-8 mr-2 border rounded-full bg-blue-400 text-center"
            >
              SD
            </div>
            <span>Stefan Derler</span>
          </div>
        </ul>
      </section>
      <section class="bg-slate-600">
        <div class="chat-grid h-full border-inherit">
          <div class="border-inherit flex flex-col">
            <div class="left-chat">
              <div class="font-bold text-green-300">Stefan Derler</div>
              <p class="text-white">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores
                veritatis quibusdam fugit odio laborum quaerat iure rem nisi
                quidem quasi itaque ut, harum commodi ea in distinctio quod
                dolor placeat.
              </p>
            </div>
            <div class="right-chat">
              <div class="font-bold text-pink-400">Matthias Derler</div>
              <p class="text-white">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores
                veritatis quibusdam fugit odio laborum quaerat iure rem nisi
                quidem quasi itaque ut, harum commodi ea in distinctio quod
                dolor placeat.
              </p>
            </div>
            <div class="right-chat mt-[0.1rem]">
              <p class="text-white">Lorem ipsum elit.</p>
            </div>
          </div>
          <div
            class="mt-auto mx-5 mb-3 shadow-lg bg-slate-900 rounded-md px-2 pt-2 pb-1 flex flex-col align-middle"
          >
            <textarea
              class="w-full bg-slate-900 text-white chat-input outline-none"
              placeholder="Type a message..."
            ></textarea>
          </div>
        </div>
      </section>
    </div>
    <script>
      function main() {
        const darkModeToggle = document.querySelector('#darkMode')
        darkModeToggle.addEventListener('change', onDarkModeChange)

        const body = document.querySelector('body')
        const darkMode = localStorage.getItem('darkMode')
        if (darkMode === 'enabled') {
          body.classList.add('dark')
          darkModeToggle.checked = true
        }

        const chatInput = document.querySelector('.chat-input')
        chatInput.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault()
            console.log('Send message:', chatInput.value)
            chatInput.value = ''
          }
        })
      }

      window.onload = main

      function onDarkModeChange(event) {
        const body = document.querySelector('body')
        if (event.target.checked) {
          body.classList.add('dark')
          localStorage.setItem('darkMode', 'enabled')
        } else {
          body.classList.remove('dark')
          localStorage.setItem('darkMode', null)
        }
      }
    </script>
  </body>
</html>
